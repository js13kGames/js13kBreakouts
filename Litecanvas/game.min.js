(()=>{var ft=new AudioContext,bt=(s=1,i=.05,n=220,l=0,c=0,b=.1,f=0,w=1,D=0,I=0,A=0,d=0,F=0,H=0,O=0,k=0,o=0,C=1,P=0,j=0,X=0)=>{let L=Math,v=2*L.PI,g=44100,ot=D*=500*v/g/g,tt=n*=(1-i+2*i*L.random(i=[]))*v/g,B=0,et=0,y=0,G=1,a=0,nt=0,M=0,U=X<0?-1:1,S=v*U*X*2/g,q=L.cos(S),Y=L.sin,t=Y(S)/4,e=1+t,r=-2*q/e,h=(1-t)/e,m=(1+U*q)/2/e,_=-(U+q)/e,T=m,V=0,u=0,x=0,p=0;for(l=g*l+9,P*=g,c*=g,b*=g,o*=g,I*=500*v/g**3,O*=v/g,A*=v/g,d*=g,F=g*F|0,s*=.3*(globalThis.zzfxV||1),U=l+P+c+b+o|0;y<U;i[y++]=M*s)++nt%(100*k|0)||(M=f?1<f?2<f?3<f?Y(B*B):L.max(L.min(L.tan(B),1),-1):1-(2*B/v%2+2)%2:1-4*L.abs(L.round(B/v)-B/v):Y(B),M=(F?1-j+j*Y(v*y/F):1)*(M<0?-1:1)*L.abs(M)**w*(y<l?y/l:y<l+P?1-(y-l)/P*(1-C):y<l+P+c?C:y<U-o?(U-y-o)/b*C:0),M=o?M/2+(o>y?0:(y<U-o?1:(U-y)/o)*i[y-o|0]/2/s):M,X&&(M=p=T*V+_*(V=u)+m*(u=M)-h*x-r*(x=p))),S=(n+=D+=I)*L.cos(O*et++),B+=S+S*H*Y(y**5),G&&++G>d&&(n+=A,tt+=A,G=0),!F||++a%F||(n=tt,D=ot,G=G||1);s=ft.createBuffer(1,U,g),s.getChannelData(0).set(i),n=ft.createBufferSource(),n.buffer=s,n.connect(ft.destination),n.start()};var ht=["#111","#6a7799","#aec2c2","#FFF1E8","#e83b3b","#fabc20","#155fd9","#3cbcfc","#327345","#63c64d","#6c2c1f","#ac7c00"];function mt(s={}){let i=globalThis,n=Math.PI,l=n*2,c=requestAnimationFrame,b=[],f=(t,e,r)=>{t.addEventListener(e,r,!1),b.push(()=>t.removeEventListener(e,r,!1))},w=Number.isFinite;s=Object.assign({fps:60,fullscreen:!0,width:null,height:null,autoscale:!0,pixelart:!1,antialias:!1,canvas:null,global:!0,loop:null,pauseOnBlur:!0,tapEvents:!0,keyboardEvents:!0,animate:!0},s);let I=!1,A=[],d=s.canvas||document.createElement("canvas"),F=s.fullscreen,H=s.autoscale,O=s.animate,k=1,o,C=.5,P=1,j,X,L,v=0,g=!0,ot="sans-serif",tt=32,B=Date.now(),et=s.global,y={init:null,update:null,draw:null,resized:null,tap:null,untap:null,tapping:null,tapped:null},G={settings:Object.assign({},s),colors:ht},a={WIDTH:s.width,HEIGHT:s.height||s.width,CANVAS:null,ELAPSED:0,CENTERX:0,CENTERY:0,MOUSEX:-1,MOUSEY:-1,DEFAULT_SFX:[.5,,1675,,.06,.2,1,1.8,,,637,.06],PI:n,TWO_PI:l,HALF_PI:n*.5,lerp:(t,e,r)=>t+r*(e-t),deg2rad:t=>n/180*t,rad2deg:t=>180/n*t,clamp:(t,e,r)=>t<e?e:t>r?r:t,wrap:(t,e,r)=>t-(r-e)*Math.floor((t-e)/(r-e)),map(t,e,r,h,m,_){let T=(t-e)/(r-e)*(m-h)+h;return _?a.clamp(T,h,m):T},norm:(t,e,r)=>a.map(t,e,r,0,1),rand:(t=0,e=1)=>{let r=1664525,h=1013904223,m=4294967296;return B=(r*B+h)%m,B/m*(e-t)+t},randi:(t=0,e=1)=>Math.floor(a.rand(t,e+1)),seed:t=>t==null?B:B=~~t,cls(t){let e=o.canvas.width,r=o.canvas.height;t==null?o.clearRect(0,0,e,r):a.rectfill(0,0,e,r,t)},rect(t,e,r,h,m,_=null){o.beginPath(),o[_?"roundRect":"rect"](~~t-C,~~e-C,~~r+C*2,~~h+C*2,_),a.stroke(m)},rectfill(t,e,r,h,m,_=null){o.beginPath(),o[_?"roundRect":"rect"](~~t,~~e,~~r,~~h,_),a.fill(m)},circ(t,e,r,h){o.beginPath(),o.arc(~~t,~~e,~~r,0,l),a.stroke(h)},circfill(t,e,r,h){o.beginPath(),o.arc(~~t,~~e,~~r,0,l),a.fill(h)},line(t,e,r,h,m){o.beginPath();let _=C!==0&&~~t===~~r?.5:0,T=C!==0&&~~e===~~h?.5:0;o.moveTo(~~t+_,~~e+T),o.lineTo(~~r+_,~~h+T),a.stroke(m)},linewidth(t){o.lineWidth=~~t,C=~~t%2===0?0:.5},linedash(t,e=0){o.setLineDash(t),o.lineDashOffset=e},text(t,e,r,h=3,m="normal"){o.font=`${m} ${tt}px ${ot}`,o.fillStyle=a.getcolor(h),o.fillText(r,~~t,~~e)},textfont(t){ot=t},textsize(t){tt=t},textalign(t,e){t&&(o.textAlign=t),e&&(o.textBaseline=e)},image(t,e,r){o.drawImage(r,~~t,~~e)},paint(t,e,r,h={}){let m=h.canvas||new OffscreenCanvas(1,1),_=h.scale||1,T=o;if(m.width=t*_,m.height=e*_,o=m.getContext("2d"),o.scale(_,_),r.push){let V=0,u=0;o.imageSmoothingEnabled=!1;for(let x of r){for(let p of x)p!==" "&&p!=="."&&a.rectfill(V,u,1,1,parseInt(p,16)),V++;u++,V=0}}else r(o);return o=T,m},ctx(t){return t&&(o=t),o},push:()=>o.save(),pop:()=>o.restore(),translate:(t,e)=>o.translate(~~t,~~e),scale:(t,e)=>o.scale(t,e||t),rotate:t=>o.rotate(t),alpha(t){o.globalAlpha=a.clamp(t,0,1)},path:t=>new Path2D(t),fill(t,e){o.fillStyle=a.getcolor(t),e?o.fill(e):o.fill()},stroke(t,e){o.strokeStyle=a.getcolor(t),e?o.stroke(e):o.stroke()},clip(t){o.clip(t)},sfx(t,e=0,r=1){return i.zzfxV<=0||navigator.userActivation&&!navigator.userActivation.hasBeenActive?!1:(t=t||a.DEFAULT_SFX,(e>0||r!==1)&&(t=t.slice(),t[0]=r*(t[0]||1),t[10]=~~t[10]+e),bt.apply(0,t),t)},volume(t){i.zzfxV=t},colrect:(t,e,r,h,m,_,T,V)=>t<m+T&&t+r>m&&e<_+V&&e+h>_,colcirc:(t,e,r,h,m,_)=>(h-t)**2+(m-e)**2<=(r+_)**2,use(t,e={}){I?Y(t,e):A.push([t,e])},listen(t,e){return y[t]=y[t]||new Set,y[t].add(e),()=>y[t].delete(e)},emit(t,e,r,h,m){q("before:"+t,e,r,h,m),q(t,e,r,h,m),q("after:"+t,e,r,h,m)},getcolor:t=>ht[~~t%ht.length],setvar(t,e){a[t]=e,et&&(i[t]=e)},resize(t,e){a.setvar("WIDTH",d.width=t),a.setvar("HEIGHT",d.height=e),S()},timescale(t){P=t},setfps(t){X=1/t,L=X*1e3,v=0},quit(){a.emit("quit");for(let t of b)t();if(g=y=!1,et){for(let t in a)delete i[t];delete i.__litecanvas}}};for(let t of["sin","cos","atan2","hypot","tan","abs","ceil","round","floor","trunc","min","max","pow","sqrt","sign","exp"])a[t]=Math[t];function nt(){I=!0;let t=s.loop?s.loop:i;for(let e in y)t[e]&&a.listen(e,t[e]);for(let[e,r]of A)Y(e,r);if((F||H)&&f(i,"resize",S),S(),s.tapEvents){let e=(u,x)=>[(u-d.offsetLeft)/k,(x-d.offsetTop)/k],r=new Map,h=(u,x,p)=>{let E={x,y:p,startX:x,startY:p,ts:performance.now()};return r.set(u,E),E},m=(u,x,p)=>{let E=r.get(u)||h(u);E.x=x,E.y=p},_=u=>u&&performance.now()-u.ts<=200,T=!1;f(d,"mousedown",u=>{u.preventDefault();let[x,p]=e(u.pageX,u.pageY);a.emit("tap",x,p,0),h(0,x,p),T=!0}),f(d,"mousemove",u=>{u.preventDefault();let[x,p]=e(u.pageX,u.pageY);a.setvar("MOUSEX",x),a.setvar("MOUSEY",p),T&&(a.emit("tapping",x,p,0),m(0,x,p))}),f(d,"mouseup",u=>{u.preventDefault();let x=r.get(0),[p,E]=e(u.pageX,u.pageY);_(x)&&a.emit("tapped",x.startX,x.startY,0),a.emit("untap",p,E,0),r.delete(0),T=!1}),f(d,"touchstart",u=>{u.preventDefault();let x=u.changedTouches;for(let p of x){let[E,st]=e(p.pageX,p.pageY);a.emit("tap",E,st,p.identifier+1),h(p.identifier+1,E,st)}}),f(d,"touchmove",u=>{u.preventDefault();let x=u.changedTouches;for(let p of x){let[E,st]=e(p.pageX,p.pageY);a.emit("tapping",E,st,p.identifier+1),m(p.identifier+1,E,st)}});let V=u=>{u.preventDefault();let x=[];if(u.targetTouches.length>0)for(let p of u.targetTouches)x.push(p.identifier+1);for(let[p,E]of r)x.includes(p)||(_(E)&&a.emit("tapped",E.startX,E.startY,p),a.emit("untap",E.x,E.y,p),r.delete(p))};f(d,"touchend",V),f(d,"touchcancel",V),f(i,"blur",()=>{T=!1;for(let[u,x]of r)a.emit("untap",x.x,x.y,u),r.delete(u)})}if(s.keyboardEvents){let e=new Set,r=h=>h==="any"?e.size>0:e.has(h.toLowerCase());a.setvar("iskeydown",r),f(i,"keydown",h=>{e.add(h.key.toLowerCase())}),f(i,"keyup",h=>{e.delete(h.key.toLowerCase())}),f(i,"blur",()=>e.clear())}s.pauseOnBlur&&(f(i,"blur",()=>{g=!1}),f(i,"focus",()=>{g=!0,c(M)})),a.setfps(s.fps),a.emit("init",a),j=performance.now(),c(M)}function M(t){let e=!O,r=t-j;for(v+=r>100?100:r,j=t;v>=L;)a.emit("update",X*P),a.setvar("ELAPSED",a.ELAPSED+X*P),v-=L,e=!0;e&&(a.textalign("start","top"),a.emit("draw")),g&&O&&c(M)}function U(){d=typeof d=="string"?document.querySelector(d):d,a.setvar("CANVAS",d),o=d.getContext("2d"),f(d,"click",()=>i.focus()),a.WIDTH>0&&(F=!1),d.style="",d.width=a.WIDTH,d.height=a.HEIGHT||a.WIDTH,d.parentNode||document.body.appendChild(d)}function S(){let t=i.innerWidth,e=i.innerHeight,r=d.style;r.display="block",F?(r.position="absolute",r.inset=0,a.setvar("WIDTH",d.width=t),a.setvar("HEIGHT",d.height=e)):H&&(r.margin="auto",k=Math.min(t/a.WIDTH,e/a.HEIGHT),k=(s.pixelart?~~k:k)||1,r.width=a.WIDTH*k+"px",r.height=a.HEIGHT*k+"px"),a.setvar("CENTERX",a.WIDTH/2),a.setvar("CENTERY",a.HEIGHT/2),(!s.antialias||s.pixelart)&&(o.imageSmoothingEnabled=!1,d.style.imageRendering="pixelated"),a.emit("resized",k),O||c(M)}function q(t,e,r,h,m){if(y[t])for(let _ of y[t])_(e,r,h,m)}function Y(t,e){let r=t(a,G,e);if(typeof r=="object")for(let h of Object.keys(r))a.setvar(h,r[h])}if(et){if(i.__litecanvas)throw"global litecanvas already instantiated";Object.assign(i,a),i.__litecanvas=a}return U(),document.readyState==="loading"?f(i,"DOMContentLoaded",()=>c(nt)):c(nt),a}var dt=(s,i,n,l,c,b,f,w)=>{let D=Math.max(s,c),I=Math.min(s+n,c+f)-D,A=Math.max(i,b),d=Math.min(i+l,b+w)-A;return[D,A,I,d]};var xt=(s,i,n,l,c,b,f,w)=>{let[D,I,A,d]=dt(s,i,n,l,c,b,f,w),F="",H=s,O=i;return A<d?s<c?(F="right",H=c-n):(F="left",H=c+f):i<b?(F="bottom",O=b-l):(F="top",O=b+w),{direction:F,x:H,y:O}};var Tt=Math.sqrt,Lt=Math.cos,vt=Math.sin,se=2*Math.PI,lt=class{x;y;constructor(i=0,n=i){this.x=i,this.y=n}toString(){return`Vector (${this.x}, ${this.y})`}},Mt=s=>s instanceof lt,R=(s=0,i=s)=>(Mt(s)&&(i=s.y,s=s.x),new lt(s,i));var yt=(s,i)=>{let n=Lt(i),l=vt(i);return s.x=n*s.x-l*s.y,s.y=l*s.x+n*s.y,s};var gt=s=>Tt(s.x*s.x+s.y*s.y);var Bt=advance=(s,i,n,l=1)=>{n&&(i.x+=n.x*l,i.y+=n.y*l),s.x+=i.x*l,s.y+=i.y*l};var Me=Math.PI/2;var At=4,Ue=1<<At,Ut=8,ke=1<<Ut;var it=[,,1e3,,.03,.02,1,2,,,940,.03,,,,,.2,.6,,.06],_t=[.5,0,500,,.04,.3,1,2,,,570,.02,.02,,,,.04],Et=[1.31,,154,.05,.3,.37,1,.3,-9.9,-6.9,,,.11,,,.2,.02,.42,.16];var rt=class{dx;pos=R();width=230;height=50;color=2;borderRadius=[10];constructor(i,n){this.pos.x=i-this.width/2,this.pos.y=n}aabb(){return[this.pos.x,this.pos.y,this.width,this.height]}moveTo(i){this.dx=i}update(i){this.dx!=null&&(this.pos.x=clamp(lerp(this.pos.x,this.dx,.1),0,WIDTH-this.width))}draw(){rectfill(this.pos.x,this.pos.y,this.width,this.height,this.color,this.borderRadius)}},ct=class{pos=R();velocity=R();radius=30;color=2;offscreen=!1;constructor(){this.reset()}aabb(){return[this.pos.x-this.radius,this.pos.y-this.radius,this.radius*2,this.radius*2]}reset(){this.velocity.x=0,this.velocity.y=900,this.pos.x=CENTERX,this.pos.y=CENTERY,this.offscreen=!1}update(i){this.offscreen||(this.pos.x+=this.velocity.x*i,this.pos.y+=this.velocity.y*i,this.pos.y-this.radius<0?(this.pos.y=this.radius,this.velocity.y*=-1,sfx(it)):this.pos.x-this.radius<0?(this.pos.x=this.radius,this.velocity.x*=-1,sfx(it)):this.pos.x+this.radius>WIDTH?(this.pos.x=WIDTH-this.radius,this.velocity.x*=-1,sfx(it)):this.pos.y-this.radius>HEIGHT&&(this.offscreen=!0,sfx(Et)))}draw(){this.offscreen||circfill(this.pos.x,this.pos.y,this.radius,this.color)}checkCollision(i){let n=this.aabb(),l=i.aabb();if(colrect(...n,...l)){sfx(it);let{direction:c,x:b,y:f}=xt(...n,...l);if(c&&(this.pos.x=b+this.radius,this.pos.y=f+this.radius),i instanceof rt)switch(c){case"bottom":let w=i.pos.x+i.width/2,D=i.pos.y+i.height/2,I=clamp(atan2(this.pos.y-D,this.pos.x-w),deg2rad(-135),deg2rad(-45)),A=gt(this.velocity);yt(this.velocity,I),this.velocity.x=A*cos(I),this.velocity.y=-clamp(abs(this.velocity.y),900,1200);break;case"left":case"right":this.velocity.x*=-1,this.velocity.y=abs(this.velocity.y)>0?this.velocity.y:900}else if(i instanceof at)switch(c){case"top":case"bottom":this.velocity.y*=-1;break;case"left":case"right":this.velocity.x*=-1}return!0}return!1}},at=class{pos=R();velocity=R();width=0;height=0;color=0;borderRadius=[10];constructor(i,n,l,c,b){this.pos.x=i,this.pos.y=n,this.width=l,this.height=c,this.color=b}center(){return R(this.pos.x+this.width/2,this.pos.y+this.height/2)}aabb(){return[this.pos.x,this.pos.y,this.width,this.height]}draw(){rectfill(this.pos.x,this.pos.y,this.width,this.height,this.color,this.borderRadius)}},ut=class{pos=R();velocity=R();radius=0;color=0;constructor(i,n){this.pos.x=i,this.pos.y=n,this.velocity.x=(rand()<.5?1:-1)*rand(0,480),this.velocity.y=(rand()<.5?1:-1)*rand(0,480),this.opacity=rand(),this.radius=randi(15,30),this.color=11,this.lifespan=1}update(i){this.lifespan-=i,this.opacity=max(0,this.opacity-.05),this.pos.x+=this.velocity.x*i,this.pos.y+=this.velocity.y*i}draw(){push(),alpha(this.opacity),circfill(this.pos.x,this.pos.y,this.radius,this.color),pop()}};function Dt(s,{colors:i}){let n=["#212633","#4c4c4c","#ffffff","#700f16","#76121a","#7c151d","#831720","#891a23","#901d26","#96202a","#9c232d","#9c232d"];i.length=n.length;for(let[l,c]of n.entries())i[l]=c}function wt(s){return s.setvar("LOADING",s.LOADING||0),{loadImage:async(n,l)=>{let c=new Image;s.setvar("LOADING",++s.LOADING),c.onload=()=>{l(c),s.setvar("LOADING",--s.LOADING)},c.src=n}}}var It="js13breakouts_litecanvas_highscore",Ft={},N,W,$,z,K,pt=localStorage.getItem(It)||0,Z,J,Q=0;mt({width:1080,height:1920,antialias:!0,loop:{init:kt,update:Vt,draw:Ot,tapped:Ct}});use(Dt);use(wt);function kt(){K=0,Z=!1,loadImage("logo.png",s=>{Ft.logo=s})}function Ct(s,i,n){LOADING||(Z?J?Q>0?(N.reset(),sfx(_t),J=!1):Z=!1:n>0&&W.moveTo(s):Rt())}function Vt(s){LOADING||Z&&Pt(s)}function Ot(){cls(0),!LOADING&&(push(),Z?St():Nt(),pop())}function Rt(){if(Z)return;W=W||new rt(CENTERX,HEIGHT-100),N=N||new ct,N.reset(),sfx(_t),z=[],$=[];let s=8,i=16,n=8,l=7,c=(WIDTH-(l-1)*i-s*2)/7,b=48,f=200,w=s;for(let D=0;D<l;D++)for(let I=0;I<n;I++)$.push(new at(w+D*c+D*i,f+I*b+I*i,c,b,I+3));Z=!0,J=!1,Q=3,K=0}function Nt(){push(),scale(1.75),image(50,100,Ft.logo),pop(),textsize(150),textalign("center","middle"),text(CENTERX,CENTERY+200,"Tap to Play",2),textsize(90),text(CENTERX,CENTERY+400,"High Score",2),text(CENTERX,CENTERY+520,pt,2)}function Pt(s){let i=MOUSEX;if(i>=0&&W.moveTo(i),W.update(),!J){let l=s/4,c=!1;for(let b=0;b<4;b++){if(N.update(l),N.offscreen){Q--,Q===0&&K>pt&&(pt=K,localStorage.setItem(It,pt)),J=!0;break}if(!c){c=N.checkCollision(W);for(let f=0;f<$.length;f++){let w=$[f];if(c=N.checkCollision(w),c){$.splice(f,1),K++;for(let D=0;D<25;D++)z.push(new ut(w.pos.x+w.width/2,w.pos.y+w.height/2));break}}}}}for(let n=0;n<z.length;n++)z[n].update(s),z[n].lifespan<=0&&z.splice(n,1)}function St(){W.draw(),N.draw();for(let s=0;s<$.length;s++)$[s].draw();for(let s=0;s<z.length;s++)z[s].draw();if(Ht(),Xt(),J){textsize(150),textalign("center","middle");let s=Q>0?"Tap to Play":"Game Over!";text(CENTERX,CENTERY+200,s,2)}}function Ht(){push();let s=50,i=15,n=[5];translate(CENTERX-s*1.5-i,50);for(let l=0;l<3;l++){let c=l<Q?2:1;rectfill(l*s+l*i,0,s,s,c,n)}pop()}function Xt(){textsize(60),text(50,50,K,2)}})();
