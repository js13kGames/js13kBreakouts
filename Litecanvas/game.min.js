(()=>{var pt=new AudioContext,gt=(s=1,i=.05,n=220,c=0,f=0,u=.1,w=0,E=1,m=0,a=0,b=0,k=0,M=0,A=0,h=0,tt=0,C=0,B=1,L=0,G=0,V=0)=>{let H=Math,R=2*H.PI,T=44100,et=m*=500*R/T/T,Z=n*=(1-i+2*i*H.random(i=[]))*R/T,S=0,v=0,I=0,r=1,nt=0,K=0,N=0,D=V<0?-1:1,W=R*D*V*2/T,j=H.cos(W),t=H.sin,e=t(W)/4,o=1+e,l=-2*j/o,x=(1-e)/o,g=(1+D*j)/2/o,O=-(D+j)/o,P=g,p=0,_=0,d=0,y=0;for(c=T*c+9,L*=T,f*=T,u*=T,C*=T,a*=500*R/T**3,h*=R/T,b*=R/T,k*=T,M=T*M|0,s*=.3*(globalThis.zzfxV||1),D=c+L+f+u+C|0;I<D;i[I++]=N*s)++K%(100*tt|0)||(N=w?1<w?2<w?3<w?t(S*S):H.max(H.min(H.tan(S),1),-1):1-(2*S/R%2+2)%2:1-4*H.abs(H.round(S/R)-S/R):t(S),N=(M?1-G+G*t(R*I/M):1)*(N<0?-1:1)*H.abs(N)**E*(I<c?I/c:I<c+L?1-(I-c)/L*(1-B):I<c+L+f?B:I<D-C?(D-I-C)/u*B:0),N=C?N/2+(C>I?0:(I<D-C?1:(D-I)/C)*i[I-C|0]/2/s):N,V&&(N=y=P*p+O*(p=_)+g*(_=N)-x*d-l*(d=y))),W=(n+=m+=a)*H.cos(h*v++),S+=W+W*A*t(I**5),r&&++r>k&&(n+=b,Z+=b,r=0),!M||++nt%M||(n=Z,m=et,r=r||1);s=pt.createBuffer(1,D,T),s.getChannelData(0).set(i),n=pt.createBufferSource(),n.buffer=s,n.connect(pt.destination),n.start()};var ht=["#111","#6a7799","#aec2c2","#FFF1E8","#e83b3b","#fabc20","#155fd9","#3cbcfc","#327345","#63c64d","#6c2c1f","#ac7c00"];function ut(s={}){let i=globalThis,n=Math.PI,c=n*2,f=requestAnimationFrame,u=(t,e,o)=>t.addEventListener(e,o);s=Object.assign({fps:60,fullscreen:!0,width:null,height:null,autoscale:!0,pixelart:!1,antialias:!1,canvas:null,global:!0,loop:null,pauseOnBlur:!0,tapEvents:!0,keyboardEvents:!0,animate:!0},s);let E=!1,m=[],a=s.canvas||document.createElement("canvas"),b=s.fullscreen,k=s.autoscale,M=s.animate,A=1,h,tt=1,C,B,L,G=0,V=!0,H=0,R=0,T="sans-serif",et="",Z=32,S=Date.now(),v={init:null,update:null,draw:null,resized:null,tap:null,untap:null,tapping:null,tapped:null},I={settings:Object.assign({},s),colors:ht},r={WIDTH:s.width,HEIGHT:s.height||s.width,CANVAS:null,ELAPSED:0,FPS:0,CENTERX:0,CENTERY:0,MOUSEX:-1,MOUSEY:-1,DEFAULT_SFX:[.5,,1675,,.06,.2,1,1.8,,,637,.06],PI:n,TWO_PI:c,HALF_PI:n*.5,lerp:(t,e,o)=>t+o*(e-t),deg2rad:t=>n/180*t,rad2deg:t=>180/n*t,clamp:(t,e,o)=>t<e?e:t>o?o:t,wrap:(t,e,o)=>t-(o-e)*Math.floor((t-e)/(o-e)),map(t,e,o,l,x,g){let O=(t-e)/(o-e)*(x-l)+l;return g?r.clamp(O,l,x):O},norm:(t,e,o)=>r.map(t,e,o,0,1),rand:(t=0,e=1)=>(S=(1664525*S+1013904223)%4294967296,S/4294967296*(e-t)+t),randi:(t=0,e=1)=>Math.floor(r.rand(t,e+1)),seed:t=>t==null?S:S=~~t,cls(t){t==null?h.clearRect(0,0,r.WIDTH,r.HEIGHT):r.rectfill(0,0,r.WIDTH,r.HEIGHT,t)},rect(t,e,o,l,x=0,g=null){h.beginPath(),h[g?"roundRect":"rect"](~~t,~~e,o,l,g),r.stroke(x)},rectfill(t,e,o,l,x=0,g=null){h.beginPath(),h[g?"roundRect":"rect"](~~t,~~e,o,l,g),r.fill(x)},circ(t,e,o,l){h.beginPath(),h.arc(~~t,~~e,o,0,c),r.stroke(l)},circfill(t,e,o,l){h.beginPath(),h.arc(~~t,~~e,o,0,c),r.fill(l)},line(t,e,o,l,x){h.beginPath(),h.moveTo(~~t,~~e),h.lineTo(~~o,~~l),r.stroke(x)},linewidth(t){h.lineWidth=t},linedash(t,e=0){h.setLineDash(t),h.lineDashOffset=e},text(t,e,o,l=3){h.font=`${et} ${Z}px ${T}`,h.fillStyle=r.getcolor(l),h.fillText(o,~~t,~~e)},textfont(t){T=t},textsize(t){Z=t},textstyle(t){et=t||""},textalign(t,e){t&&(h.textAlign=t),e&&(h.textBaseline=e)},textmetrics(t,e=Z){h.font=`${et} ${e}px ${T}`;let o=h.measureText(t);return o.height=o.actualBoundingBoxAscent+o.actualBoundingBoxDescent,o},image(t,e,o){h.drawImage(o,~~t,~~e)},paint(t,e,o,l={}){let x=l.canvas||new OffscreenCanvas(1,1),g=l.scale||1,O=h;if(x.width=t*g,x.height=e*g,h=x.getContext("2d"),h.scale(g,g),o.push){let P=0,p=0;h.imageSmoothingEnabled=!1;for(let _ of o){for(let d of _)d!==" "&&d!=="."&&r.rectfill(P,p,1,1,parseInt(d,16)),P++;p++,P=0}}else o(h);return h=O,x},ctx(t){return t&&(h=t),h},push:()=>h.save(),pop:()=>h.restore(),translate:(t,e)=>h.translate(~~t,~~e),scale:(t,e)=>h.scale(t,e||t),rotate:t=>h.rotate(t),transform:(t,e,o,l,x,g,O=!0)=>h[O?"setTransform":"transform"](t,e,o,l,x,g),alpha(t){h.globalAlpha=r.clamp(t,0,1)},path:t=>new Path2D(t),fill(t,e){h.fillStyle=r.getcolor(t),e?h.fill(e):h.fill()},stroke(t,e){h.strokeStyle=r.getcolor(t),e?h.stroke(e):h.stroke()},clip(t){h.clip(t)},sfx(t,e=0,o=1){return i.zzfxV<=0||navigator.userActivation&&!navigator.userActivation.hasBeenActive?!1:(t=t||r.DEFAULT_SFX,(e>0||o!==1)&&(t=t.slice(),t[0]=o*(t[0]||1),t[10]=~~t[10]+e),gt.apply(0,t),t)},volume(t){i.zzfxV=+t},colrect:(t,e,o,l,x,g,O,P)=>t<x+O&&t+o>x&&e<g+P&&e+l>g,colcirc:(t,e,o,l,x,g)=>(l-t)**2+(x-e)**2<=(o+g)**2,use(t,e={}){t.__conf=e,E?j(t):m.push(t)},listen(t,e){return v[t]=v[t]||new Set,v[t].add(e),()=>v[t].delete(e)},emit(t,e,o,l,x){W("before:"+t,e,o,l,x),W(t,e,o,l,x),W("after:"+t,e,o,l,x)},getcolor:t=>ht[~~t%ht.length],setvar(t,e){r[t]=e,s.global&&(i[t]=e)},resize(t,e){r.setvar("WIDTH",a.width=t),r.setvar("HEIGHT",a.height=e||t),D()},timescale(t){tt=t},setfps(t){B=1/t,L=B*1e3,G=0}};for(let t of["sin","cos","atan2","hypot","tan","abs","ceil","round","floor","trunc","min","max","pow","sqrt","sign","exp"])r[t]=Math[t];function nt(){E=!0;let t=s.loop?s.loop:i;for(let e of Object.keys(v))t[e]&&r.listen(e,t[e]);for(let e of m)j(e);if((b||k)&&u(i,"resize",D),D(),s.tapEvents){let e=(p,_)=>[(p-a.offsetLeft)/A,(_-a.offsetTop)/A],o=new Map,l=(p,_,d)=>{let y={x:_,y:d,startX:_,startY:d,ts:performance.now()};return o.set(p,y),y},x=(p,_,d)=>{let y=o.get(p)||l(p);y.x=_,y.y=d},g=p=>p&&performance.now()-p.ts<=200,O=!1;u(a,"mousedown",p=>{p.preventDefault();let[_,d]=e(p.pageX,p.pageY);r.emit("tap",_,d,0),l(0,_,d),O=!0}),u(a,"mousemove",p=>{p.preventDefault();let[_,d]=e(p.pageX,p.pageY);r.setvar("MOUSEX",_),r.setvar("MOUSEY",d),O&&(r.emit("tapping",_,d,0),x(0,_,d))}),u(a,"mouseup",p=>{p.preventDefault();let _=o.get(0),[d,y]=e(p.pageX,p.pageY);g(_)&&r.emit("tapped",_.startX,_.startY,0),r.emit("untap",d,y,0),o.delete(0),O=!1}),u(a,"touchstart",p=>{p.preventDefault();let _=p.changedTouches;for(let d of _){let[y,st]=e(d.pageX,d.pageY);r.emit("tap",y,st,d.identifier+1),l(d.identifier+1,y,st)}}),u(a,"touchmove",p=>{p.preventDefault();let _=p.changedTouches;for(let d of _){let[y,st]=e(d.pageX,d.pageY);r.emit("tapping",y,st,d.identifier+1),x(d.identifier+1,y,st)}});let P=p=>{p.preventDefault();let _=[];if(p.targetTouches.length>0)for(let d of p.targetTouches)_.push(d.identifier+1);for(let[d,y]of o)_.includes(d)||(g(y)&&r.emit("tapped",y.startX,y.startY,d),r.emit("untap",y.x,y.y,d),o.delete(d))};u(a,"touchend",P),u(a,"touchcancel",P),u(i,"blur",()=>{O=!1;for(let[p,_]of o)r.emit("untap",_.x,_.y,p),o.delete(p)})}if(s.keyboardEvents){let e=new Set,o=l=>l==="any"?e.size>0:e.has(l.toLowerCase());r.setvar("iskeydown",o),u(i,"keydown",l=>{e.add(l.key.toLowerCase())}),u(i,"keyup",l=>{e.delete(l.key.toLowerCase())}),u(i,"blur",()=>e.clear())}s.pauseOnBlur&&(u(i,"blur",()=>{V=!1}),u(i,"focus",()=>{C=performance.now(),f(K),V=!0})),r.setfps(s.fps),r.emit("init",r),C=performance.now(),R=C+1e3,f(K)}function K(t){let e=!M,o=t-C;for(G+=o>1e3?L:o;G>=L;)r.emit("update",B*tt),r.setvar("ELAPSED",r.ELAPSED+B*tt),G-=L,e=!0;e&&(r.textalign("start","top"),r.emit("draw"),H++,t+G>R&&(r.setvar("FPS",H),H=0,R=t+1e3)),C=t,V&&M&&f(K)}function N(){a=typeof a=="string"?document.querySelector(a):a,r.setvar("CANVAS",a),h=a.getContext("2d"),u(a,"click",()=>i.focus()),r.WIDTH>0&&(b=!1),a.width=r.WIDTH,a.height=r.HEIGHT||r.WIDTH,a.parentNode||document.body.appendChild(a),a.style.display="block",b?(a.style.position="absolute",a.style.inset=0):k&&(a.style.margin="auto")}function D(){let t=i.innerWidth,e=i.innerHeight;b?(r.setvar("WIDTH",a.width=t),r.setvar("HEIGHT",a.height=e)):k&&(A=Math.min(t/r.WIDTH,e/r.HEIGHT),A=(s.pixelart?~~A:A)||1,a.style.width=r.WIDTH*A+"px",a.style.height=r.HEIGHT*A+"px"),r.setvar("CENTERX",r.WIDTH/2),r.setvar("CENTERY",r.HEIGHT/2),(!s.antialias||s.pixelart)&&(h.imageSmoothingEnabled=!1,a.style.imageRendering="pixelated"),r.emit("resized",A),M||f(K)}function W(t,e,o,l,x){if(v[t])for(let g of v[t])g(e,o,l,x)}function j(t){let e=t(r,I,t.__conf);if(typeof e=="object")for(let o of Object.keys(e))r.setvar(o,e[o])}if(s.global){if(i.__litecanvas)throw"global litecanvas already instantiated";Object.assign(i,r),i.__litecanvas=r}return N(),document.readyState==="loading"?u(i,"DOMContentLoaded",()=>f(nt)):f(nt),r}var dt=(s,i,n,c,f,u,w,E)=>{let m=Math.max(s,f),a=Math.min(s+n,f+w)-m,b=Math.max(i,u),k=Math.min(i+c,u+E)-b;return[m,b,a,k]};var xt=(s,i,n,c,f,u,w,E)=>{let[m,a,b,k]=dt(s,i,n,c,f,u,w,E),M="",A=s,h=i;return b<k?s<f?(M="right",A=f-n):(M="left",A=f+w):i<u?(M="bottom",h=u-c):(M="top",h=u+E),{direction:M,x:A,y:h}};var bt=Math.sqrt,At=Math.cos,Ct=Math.sin,Jt=2*Math.PI,at=class{x;y;constructor(i=0,n=i){this.x=i,this.y=n}toString(){return`Vector (${this.x}, ${this.y})`}},Ht=s=>s instanceof at,X=(s=0,i=s)=>(Ht(s)&&(i=s.y,s=s.x),new at(s,i));var yt=(s,i)=>{let n=At(i),c=Ct(i);return s.x=n*s.x-c*s.y,s.y=c*s.x+n*s.y,s};var mt=s=>bt(s.x*s.x+s.y*s.y);var Ot=advance=(s,i,n,c=1)=>{n&&(i.x+=n.x*c,i.y+=n.y*c),s.x+=i.x*c,s.y+=i.y*c};var be=Math.PI/2;var Rt=4,He=1<<Rt,St=8,Oe=1<<St;var it=[,,1e3,,.03,.02,1,2,,,940,.03,,,,,.2,.6,,.06],_t=[.5,0,500,,.04,.3,1,2,,,570,.02,.02,,,,.04],wt=[1.31,,154,.05,.3,.37,1,.3,-9.9,-6.9,,,.11,,,.2,.02,.42,.16];var ot=class{dx;pos=X();width=230;height=50;color=2;borderRadius=[10];constructor(i,n){this.pos.x=i-this.width/2,this.pos.y=n}aabb(){return[this.pos.x,this.pos.y,this.width,this.height]}moveTo(i){this.dx=i}update(i){this.dx!=null&&(this.pos.x=clamp(lerp(this.pos.x,this.dx,.1),0,WIDTH-this.width))}draw(){rectfill(this.pos.x,this.pos.y,this.width,this.height,this.color,this.borderRadius)}},ct=class{pos=X();velocity=X();radius=30;color=2;offscreen=!1;constructor(){this.reset()}aabb(){return[this.pos.x-this.radius,this.pos.y-this.radius,this.radius*2,this.radius*2]}reset(){this.velocity.x=0,this.velocity.y=900,this.pos.x=CENTERX,this.pos.y=CENTERY,this.offscreen=!1}update(i){this.offscreen||(this.pos.x+=this.velocity.x*i,this.pos.y+=this.velocity.y*i,this.pos.y-this.radius<0?(this.pos.y=this.radius,this.velocity.y*=-1,sfx(it)):this.pos.x-this.radius<0?(this.pos.x=this.radius,this.velocity.x*=-1,sfx(it)):this.pos.x+this.radius>WIDTH?(this.pos.x=WIDTH-this.radius,this.velocity.x*=-1,sfx(it)):this.pos.y-this.radius>HEIGHT&&(this.offscreen=!0,sfx(wt)))}draw(){this.offscreen||circfill(this.pos.x,this.pos.y,this.radius,this.color)}checkCollision(i){let n=this.aabb(),c=i.aabb();if(colrect(...n,...c)){sfx(it);let{direction:f,x:u,y:w}=xt(...n,...c);if(f&&(this.pos.x=u+this.radius,this.pos.y=w+this.radius),i instanceof ot)switch(f){case"bottom":let E=i.pos.x+i.width/2,m=i.pos.y+i.height/2,a=clamp(atan2(this.pos.y-m,this.pos.x-E),deg2rad(-135),deg2rad(-45)),b=mt(this.velocity);yt(this.velocity,a),this.velocity.x=b*cos(a),this.velocity.y=-clamp(abs(this.velocity.y),900,1200);break;case"left":case"right":this.velocity.x*=-1,this.velocity.y=abs(this.velocity.y)>0?this.velocity.y:900}else if(i instanceof rt)switch(f){case"top":case"bottom":this.velocity.y*=-1;break;case"left":case"right":this.velocity.x*=-1}return!0}return!1}},rt=class{pos=X();velocity=X();width=0;height=0;color=0;borderRadius=[10];constructor(i,n,c,f,u){this.pos.x=i,this.pos.y=n,this.width=c,this.height=f,this.color=u}center(){return X(this.pos.x+this.width/2,this.pos.y+this.height/2)}aabb(){return[this.pos.x,this.pos.y,this.width,this.height]}draw(){rectfill(this.pos.x,this.pos.y,this.width,this.height,this.color,this.borderRadius)}},lt=class{pos=X();velocity=X();radius=0;color=0;constructor(i,n){this.pos.x=i,this.pos.y=n,this.velocity.x=(rand()<.5?1:-1)*rand(0,480),this.velocity.y=(rand()<.5?1:-1)*rand(0,480),this.opacity=rand(),this.radius=randi(15,30),this.color=11,this.lifespan=1}update(i){this.lifespan-=i,this.opacity=max(0,this.opacity-.05),this.pos.x+=this.velocity.x*i,this.pos.y+=this.velocity.y*i}draw(){push(),alpha(this.opacity),circfill(this.pos.x,this.pos.y,this.radius,this.color),pop()}};function Et(s,{colors:i}){let n=["#212633","#4c4c4c","#ffffff","#700f16","#76121a","#7c151d","#831720","#891a23","#901d26","#96202a","#9c232d","#9c232d"];i.length=n.length;for(let[c,f]of n.entries())i[c]=f}function Tt(s){return s.setvar("LOADING",0),{loadImage:async(n,c)=>{let f=new Image;f.crossOrigin="anonymous",s.setvar("LOADING",s.LOADING+1),f.onload=()=>{c(f),s.setvar("LOADING",s.LOADING-1)},f.src=n}}}var It="js13breakouts_litecanvas_highscore",Mt={},Y,F,z,U,q,ft=localStorage.getItem(It)||0,$,J,Q=0;ut({width:1080,height:1920,antialias:!0,loop:{init:Dt,update:kt,draw:Lt,tapped:Nt}});use(Et);use(Tt);function Dt(){q=0,$=!1,loadImage("logo.png",s=>{Mt.logo=s})}function Nt(s,i,n){LOADING||($?J?Q>0?(Y.reset(),sfx(_t),J=!1):$=!1:n>0&&F.moveTo(s):Pt())}function kt(s){LOADING||$&&Yt(s)}function Lt(){cls(0),!LOADING&&(push(),$?vt():Xt(),pop())}function Pt(){if($)return;F=F||new ot(CENTERX,HEIGHT-100),Y=Y||new ct,Y.reset(),sfx(_t),U=[],z=[];let s=8,i=16,n=8,c=7,f=(WIDTH-(c-1)*i-s*2)/7,u=48,w=200,E=s;for(let m=0;m<c;m++)for(let a=0;a<n;a++)z.push(new rt(E+m*f+m*i,w+a*u+a*i,f,u,a+3));$=!0,J=!1,Q=3,q=0}function Xt(){push(),scale(1.75),image(50,100,Mt.logo),pop(),textsize(150),textalign("center","middle"),text(CENTERX,CENTERY+200,"Tap to Play",2),textsize(90),text(CENTERX,CENTERY+400,"High Score",2),text(CENTERX,CENTERY+520,ft,2)}function Yt(s){let i=MOUSEX;if(i>=0&&F.moveTo(i),F.update(),!J){let c=s/4,f=!1;for(let u=0;u<4;u++){if(Y.update(c),Y.offscreen){Q--,Q===0&&q>ft&&(ft=q,localStorage.setItem(It,ft)),J=!0;break}if(!f){f=Y.checkCollision(F);for(let w=0;w<z.length;w++){let E=z[w];if(f=Y.checkCollision(E),f){z.splice(w,1),q++;for(let m=0;m<25;m++)U.push(new lt(E.pos.x+E.width/2,E.pos.y+E.height/2));break}}}}}for(let n=0;n<U.length;n++)U[n].update(s),U[n].lifespan<=0&&U.splice(n,1)}function vt(){F.draw(),Y.draw();for(let s=0;s<z.length;s++)z[s].draw();for(let s=0;s<U.length;s++)U[s].draw();if(Wt(),Bt(),J){textsize(150),textalign("center","middle");let s=Q>0?"Tap to Play":"Game Over!";text(CENTERX,CENTERY+200,s,2)}}function Wt(){push();let s=50,i=15,n=[5];translate(CENTERX-s*1.5-i,50);for(let c=0;c<3;c++){let f=c<Q?2:1;rectfill(c*s+c*i,0,s,s,f,n)}pop()}function Bt(){textsize(60),text(50,50,q,2)}})();
